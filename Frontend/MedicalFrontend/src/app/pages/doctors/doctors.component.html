<!-- Page Title -->
<div class="page-title">
  <div class="heading">
    <div class="container">
      <div class="row d-flex justify-content-center text-center">
        <div class="col-lg-8">
          <h1 class="heading-title">Doctors</h1>
          <p class="mb-0">
            Meet our team of highly qualified and experienced medical professionals, dedicated to providing compassionate care and innovative treatments to every patient.
          </p>
        </div>
      </div>
    </div>
  </div>
  <nav class="breadcrumbs">
    <div class="container">
      <ol>
        <li><a routerLink="/">Home</a></li>
        <li class="current">Doctors</li>
      </ol>
    </div>
  </nav>
</div>

<!-- Search Section -->
<section class="doctors-search">
  <div class="container">
    <div class="search-container">
      <div class="search-box">
        <input
          type="text"
          [(ngModel)]="searchTerm"
          (input)="filterDoctors()"
          placeholder="Search doctors by name or specialty...">
        <button class="search-btn">
          <i class="fas fa-search"></i>
        </button>
      </div>
      <div class="filter-options">
        <select [(ngModel)]="departmentFilter" (change)="filterDoctors()">
          <option value="">All Departments</option>
          <option value="cardiology">Cardiology</option>
          <option value="neurology">Neurology</option>
          <option value="orthopedics">Orthopedics</option>
          <option value="pediatrics">Pediatrics</option>
          <option value="dermatology">Dermatology</option>
          <option value="surgery">Surgery</option>
        </select>
        <select [(ngModel)]="experienceFilter" (change)="filterDoctors()">
          <option value="">All Experience</option>
          <option value="5">5+ Years</option>
          <option value="10">10+ Years</option>
          <option value="15">15+ Years</option>
        </select>
      </div>
    </div>
  </div>
</section>

<!-- Doctors Section -->
<section id="doctors" class="doctors section">
  <div class="container">
    <div class="row gy-4">
      <div
        class="col-lg-3 col-md-6"
        *ngFor="let doctor of filteredDoctors; let i = index">
        <div class="doctor-card" (click)="viewDoctorDetails(doctor)">
          <div class="doctor-image">
            <img [src]="doctor.DoctorImgUrl" [alt]="doctor.name" class="img-fluid">
            <div class="doctor-overlay">
              <div class="social-links">
                <a href="#"><i class="fab fa-linkedin"></i></a>
                <a href="#"><i class="fas fa-envelope"></i></a>
                <a href="#"><i class="fas fa-phone"></i></a>
              </div>
            </div>
          </div>
          <div class="doctor-content">
            <h4>{{ doctor.name }}</h4>
            <span class="specialty">{{ doctor.Specialization }}</span>
            <div class="doctor-meta">
              <div class="experience">
                <i class="fas fa-award"></i>
                <span>{{ doctor.YearsOfExperience }}+ Years Experience</span>
              </div>
              <div class="department">
                <i class="fas fa-building"></i>
                <span>{{ doctor.Specialization }} Dept.</span>
              </div>
            </div>
            <a [routerLink]="['/appointment']" [queryParams]="{doctorId: doctor.id}" class="btn-appointment">
              Book Appointment
            </a>
          </div>
        </div>
      </div>
    </div>

    <div *ngIf="filteredDoctors.length === 0" class="text-center py-5">
      <h3>No doctors found matching your criteria.</h3>
    </div>
  </div>
</section>

<!-- Doctor Details Modal -->
<div class="doctor-details-modal" [class.active]="showModal" (click)="closeModal($event)">
  <div class="modal-content" *ngIf="selectedDoctor" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>{{ selectedDoctor.name }}</h2>
      <button class="modal-close" type="button" (click)="closeModal()">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="modal-body">
      <div class="doctor-modal-content">
        <div class="doctor-modal-image">
          <img [src]="selectedDoctor.DoctorImgUrl" [alt]="selectedDoctor.name">
        </div>
        <div class="doctor-modal-info">
          <div class="doctor-specialty">
            <i class="fas fa-stethoscope"></i>
            {{ selectedDoctor.Specialization }}
          </div>
          <div class="doctor-experience">
            <i class="fas fa-award"></i>
            {{ selectedDoctor.YearsOfExperience }}+ years experience
          </div>

          <div class="doctor-availability" *ngIf="timeSlots.length > 0">
            <h3>Select Time Slot:</h3>
            <div class="availability-slots">
              <div
                *ngFor="let slot of timeSlots"
                class="time-slot"
                [class.selected]="selectedTimeSlot === slot"
                (click)="selectTimeSlot(slot)">
                {{ slot }}
              </div>
            </div>
          </div>

          <div class="modal-actions">
            <a
              [routerLink]="['/appointment']"
              [queryParams]="{doctorId: selectedDoctor.id, timeSlot: selectedTimeSlot}"
              class="btn btn-primary"
              [class.disabled]="!selectedTimeSlot">
              Book Appointment
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
